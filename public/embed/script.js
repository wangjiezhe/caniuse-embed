var OPTIONS,BROWSER_DATA,FEATURE,caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/main/fulldata-json/data-2.0.json",embedAPI="https://api.caniuse.wangjiezhe.com",BROWSERS=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"],MDN_BROWSERS_KEY={ie:"ie",edge:"edge",firefox:"firefox",chrome:"chrome",safari:"safari",ios_saf:"safari_ios",op_mini:"op_mini",and_chr:"chrome_android",android:"android",samsung:"samsunginternet_android"},FEATURE_IDENTIFIERS={supported:"y",unsupported:"n",partial:"a",unknown:"u",prefixed:"x",flagged:"d"};function setGlobalOptions(){var e=window.location.search.split("?")[1].split("&"),r={};e.forEach(function(e){var t=e.split("=")[0],n=e.split("=")[1];switch(t){case"feat":r.featureID=n,r.dataSource=0===r.featureID.indexOf("mdn-")?"mdn":"caniuse";break;case"periods":r.periods=n.split(",");break;case"accessible-colours":r.accessibleColours="true"===n;break;case"image-base":"none"!==n&&(r.imageBase=n);break;case"screenshot":r.screenshot="true"===n}}),r.periods||(r.periods=["future_1","current","past_1","past_2"]),OPTIONS=r}function getShortenedBrowserVersion(e){return e=e&&-1<e.indexOf("-")?e.split("-")[1]:e}function get(r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("GET",r,!0),n.onload=function(){200===n.status?e(JSON.parse(n.response)):t(Error(n.statusText))},n.onerror=function(){t(Error("Network Error"))},n.send()})}function post(r,a){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",r,!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onload=function(){200===n.status?e(JSON.parse(n.response)):t(Error(n.statusText))},n.onerror=function(){t(Error("Network Error"))},n.send(JSON.stringify(a))})}function getFeature(){switch(OPTIONS.dataSource){case"mdn":return post(embedAPI+"/mdn-browser-compat-data",{feature:OPTIONS.featureID}).then(function(e){return FEATURE=Object.assign({url:e.mdn_url},e),getBrowserData()});case"caniuse":return get(caniuseDataUrl).then(function(e){return FEATURE=Object.assign({url:"https://caniuse.com/#feat="+OPTIONS.featureID},e.data[OPTIONS.featureID]),getBrowserData(e.agents)})}}function getBrowserData(e){return Promise.resolve().then(function(){return e||get(caniuseDataUrl).then(function(e){return e.agents})}).then(function(e){return parseBrowserData(e)})}function parseBrowserData(e){for(var t={},r=0;r<BROWSERS.length;r++){for(var a,s=e[i=BROWSERS[r]].current_version,o=0;o<e[i].version_list.length;o++)if(0===e[i].version_list[o].era){a=o;break}a=parseInt(a),t[i]={};for(o=0;o<OPTIONS.periods.length;o++)"current"===(c=OPTIONS.periods[o])?t[i][c]=s:-1<c.indexOf("past")?(n=parseInt(c.split("_")[1]),t[i][c]=e[i].version_list[a-n]?e[i].version_list[a-n].version:null):-1<c.indexOf("future")&&(n=parseInt(c.split("_")[1]),t[i][c]=e[i].version_list[a+n]?e[i].version_list[a+n].version:null)}for(var i,u={},r=0;r<BROWSERS.length;r++){u[i=BROWSERS[r]]={};for(o=0;o<OPTIONS.periods.length;o++){var c=OPTIONS.periods[o],l=t[i][c],l=(l=e[i].usage_global[l])?l.toFixed(2):0;u[i][c]=l}}return BROWSER_DATA={versions:t,usage:u}}function parseSupportData(){var u={};for(var e=0;e<BROWSERS.length;e++){var t=BROWSERS[e];u[t]={};for(var n=0;n<OPTIONS.periods.length;n++){var r=OPTIONS.periods[n];switch(OPTIONS.dataSource){case"mdn":((e,t)=>{var n,r,a,s,o;function i(e){var t;return n[e]?t=n[e]:n[0]&&n[0][e]?t=n[0][e]:n[1]&&n[1][e]&&(t=n[1][e]),t=t&&t.replace(/â‰¤/g,"")}BROWSER_DATA.versions[e][t]&&((n=FEATURE.support[MDN_BROWSERS_KEY[e]])?(r=BROWSER_DATA.versions[e][t],o=i("version_added"),a=i("version_removed"),(!(s=!1)===o||"TP"===r&&0<o||parseFloat(r)>=parseFloat(o))&&(s=!0),o=(s=a&&parseFloat(r)<=parseFloat(a)?!1:s)?FEATURE_IDENTIFIERS.supported:FEATURE_IDENTIFIERS.unsupported,u[e][t]=o):u[e][t]=FEATURE_IDENTIFIERS.unknown)})(t,r);break;case"caniuse":u[t][r]=FEATURE.stats[t][BROWSER_DATA.versions[t][r]]}}}return u}function displayLoadingMessage(){var e=OPTIONS.featureID?OPTIONS.imageBase?'<picture><source type="image/webp" srcset="'+OPTIONS.imageBase+'.webp"><source type="image/png" srcset="'+OPTIONS.imageBase+'.png"><source type="image/jpeg" srcset="'+OPTIONS.imageBase+'.jpg"><img src="'+OPTIONS.imageBase+'.png" alt="Data on support for the '+OPTIONS.featureID+' feature across the major browsers"></picture>':"Can I Use "+OPTIONS.featureID+"? Data on support for the "+OPTIONS.featureID+" feature across the major browsers. (Embed Loading)":"No feature ID was specified";document.getElementById("defaultMessage").innerHTML=e}function displayFeatureInformation(){var e,t,n;switch(document.getElementById("featureTitle").textContent=FEATURE.title,null==FEATURE.url?(n=(e=document.getElementById("featureLink")).querySelector("span"),e.outerHTML=n.outerHTML):document.getElementById("featureLink").href=FEATURE.url,FEATURE.description&&(e=(e=(e=(e=(e=FEATURE.description).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/&lt;code&gt;/g,"")).replace(/&lt;\/code&gt;/g,""),document.getElementById("featureDescription").innerHTML=e),FEATURE.usage_perc_y?(t=(t=(n=FEATURE.usage_perc_y)+(e=FEATURE.usage_perc_a)).toFixed(2),document.getElementById("note").innerHTML='Global: <span class="y">'+n+'%</span> + <span class="a">'+e+"%</span> = "+t+"%"):FEATURE.status&&(FEATURE.status.experimental&&(document.getElementById("note").innerHTML="<strong>Experimental</strong> feature"),FEATURE.status.deprecated)&&(document.getElementById("note").innerHTML="<strong>Deprecated</strong> feature"),OPTIONS.accessibleColours&&document.body.classList.add("accessible-colours"),OPTIONS.screenshot?(document.body.classList.add("screenshot"),n=new Date,document.getElementById("footer-right").innerHTML=n.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getFullYear(),document.querySelector(".icon-external-link").setAttribute("hidden","true")):document.getElementById("accessibleColoursToggle").addEventListener("click",function(){document.body.classList.toggle("accessible-colours")}),OPTIONS.dataSource){case"mdn":document.getElementById("footer-left").innerHTML='Data from <a href="https://github.com/mdn/browser-compat-data">MDN</a> | Embed from <a href="https://caniuse.wangjiezhe.com">caniuse.wangjiezhe.com</a>';break;case"caniuse":document.getElementById("footer-left").innerHTML='Data from <a href="https://caniuse.com">caniuse.com</a> | Embed from <a href="https://caniuse.wangjiezhe.com">caniuse.wangjiezhe.com</a>'}document.body.classList.add(OPTIONS.dataSource)}function displayTable(e){for(var t=OPTIONS.periods.length-1;-1<t;t--){for(var n="",r=0;r<BROWSERS.length;r++)n+='<td class="'+BROWSERS[r]+'"></td>';(l=document.createElement("tr")).className="statistics "+OPTIONS.periods[t],l.innerHTML=n,document.getElementById("tableBody").appendChild(l)}for(var a=!1,s=!1,o=!1,t=0;t<BROWSERS.length;t++)for(var i=BROWSERS[t],u=0;u<OPTIONS.periods.length;u++){for(var c,l,d=OPTIONS.periods[u],p=(l=document.getElementsByClassName(d)[0]).childNodes,g=0;g<p.length;g++)-1<p[g].className.indexOf(i)&&(c=p[g]);null!=e[i][d]&&(c.className+=" "+e[i][d]);var m="<span>"+getShortenedBrowserVersion(BROWSER_DATA.versions[i][d])+'</span><span class="usage">'+BROWSER_DATA.usage[i][d]+"%</span>";null!=BROWSER_DATA.versions[i][d]?c.innerHTML=m:c.innerHTML="<span></span>",null!=e[i][d]&&-1<e[i][d].indexOf(FEATURE_IDENTIFIERS.prefixed)&&(a=!0),null!=e[i][d]&&-1<e[i][d].indexOf(FEATURE_IDENTIFIERS.unknown)&&(s=!0),null!=e[i][d]&&-1<e[i][d].indexOf(FEATURE_IDENTIFIERS.flagged)&&(o=!0)}document.getElementById("legendX").style.display=a?"inline-block":"none",document.getElementById("legendU").style.display=s?"inline-block":"none",document.getElementById("legendD").style.display=o?"inline-block":"none"}function postDocumentHeight(){var n=document.getElementsByClassName("feature")[0].scrollHeight,e="ciu_embed:"+OPTIONS.featureID+":"+n;parent.postMessage(e,"*"),window.onresize=function(e){n=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+OPTIONS.featureID+":"+n;parent.postMessage(t,"*")}}setGlobalOptions(),displayLoadingMessage(),getFeature().then(function(){return parseSupportData()}).then(function(e){console.log(FEATURE),console.log(e),displayFeatureInformation(),displayTable(e),document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block",postDocumentHeight()}).catch(function(e){document.getElementById("defaultMessage").innerHTML="Feature not found...",console.error(e)});